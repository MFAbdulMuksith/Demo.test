Below are the `README.md` files for each service in your setup, along with configuration details for beginners. These READMEs provide an overview of each service, its purpose, and basic setup instructions.

---

## **README.md for Prometheus**

### **Overview**
Prometheus is an open-source monitoring and alerting toolkit designed for reliability and scalability. It collects metrics from configured targets at given intervals, evaluates rule expressions, and triggers alerts if certain conditions are met.

### **Configuration**
1. **Configuration File**: The main configuration file is located at `/opt/container/prometheus/prometheus.yml`. This file defines scrape targets, alerting rules, and other settings.
2. **Alert Rules**: Alert rules are defined in `/opt/container/prometheus/alert.rules.yml`.
3. **Data Storage**: Metrics data is stored in `/opt/container/prometheus/data`.

### **Usage**
- Access the Prometheus web UI at `http://localhost:9090`.
- Reload the configuration without restarting the service:
  ```bash
  curl -X POST http://localhost:9090/-/reload
  ```

### **Docker Compose Configuration**
```yaml
prometheus:
  image: prom/prometheus:v2.40.2
  ports:
    - 9090:9090
  volumes:
    - /opt/container/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
    - /opt/container/prometheus/alert.rules.yml:/etc/prometheus/alert.rules.yml
    - /opt/container/prometheus/data:/prometheus
  command:
    - "--config.file=/etc/prometheus/prometheus.yml"
    - "--storage.tsdb.path=/prometheus"
    - "--storage.tsdb.retention.time=90d"
    - "--web.enable-lifecycle"
```

---

## **README.md for Alertmanager**

### **Overview**
Alertmanager handles alerts sent by Prometheus. It deduplicates, groups, and routes alerts to the correct receiver (e.g., email, Slack).

### **Configuration**
1. **Configuration File**: The main configuration file is located at `/opt/container/alertmanager/alertmanager.yml`. This file defines alert routing and notification settings.

### **Usage**
- Access the Alertmanager web UI at `http://localhost:9093`.

### **Docker Compose Configuration**
```yaml
alert:
  image: prom/alertmanager:v0.24.0
  ports:
    - 9093:9093
  volumes:
    - /opt/container/alertmanager/alertmanager.yml:/etc/alertmanager/alertmanager.yml
  command:
    - "--config.file=/etc/alertmanager/alertmanager.yml"
```

---

## **README.md for Grafana**

### **Overview**
Grafana is an open-source platform for monitoring and observability. It allows you to visualize metrics from Prometheus and other data sources.

### **Configuration**
1. **Data Storage**: Grafana data is stored in `/opt/container/grafana/data`.
2. **Traefik Integration**: Grafana is exposed via Traefik with TLS enabled.

### **Usage**
- Access the Grafana web UI at `https://monitor.ascension-holding.com`.

### **Docker Compose Configuration**
```yaml
grafana:
  image: grafana/grafana:9.2.5
  ports:
    - 3000:3000
  volumes:
    - /opt/container/grafana/data:/var/lib/grafana
  labels:
    - traefik.enable=true
    - traefik.http.routers.grafana.rule=Host(`monitor.ascension-holding.com`)
    - traefik.http.routers.grafana.entrypoints=websecure
    - traefik.http.routers.grafana.tls=true
    - traefik.http.routers.grafana.tls.certresolver=myresolver
```

---

## **README.md for cAdvisor**

### **Overview**
cAdvisor (Container Advisor) provides container users with an understanding of resource usage and performance characteristics of their running containers.

### **Usage**
- Access the cAdvisor web UI at `http://localhost:8080`.

### **Docker Compose Configuration**
```yaml
cadvisor:
  image: gcr.io/cadvisor/cadvisor:v0.46.0
  ports:
    - 8080:8080
  volumes:
    - /:/rootfs:ro
    - /var/run:/var/run:rw
    - /sys:/sys:ro
    - /var/lib/docker/:/var/lib/docker:ro
```

---

## **README.md for Blackbox Exporter**

### **Overview**
Blackbox Exporter allows blackbox probing of endpoints over HTTP, HTTPS, DNS, TCP, and ICMP.

### **Configuration**
1. **Configuration File**: The main configuration file is located at `/opt/container/blackbox/config.yml`.

### **Usage**
- Access the Blackbox Exporter metrics at `http://localhost:9115/metrics`.

### **Docker Compose Configuration**
```yaml
blackbox-exporter:
  image: prom/blackbox-exporter:v0.22.0
  ports:
    - 9115:9115
  volumes:
    - /opt/container/blackbox/config.yml:/etc/blackbox_exporter/config.yml
  command:
    - "--config.file=/etc/blackbox_exporter/config.yml"
```

---

## **README.md for Traefik**

### **Overview**
Traefik is a modern reverse proxy and load balancer that integrates with Docker. It automatically routes traffic to services based on labels.

### **Configuration**
1. **Dashboard**: Access the Traefik dashboard at `http://localhost:8050`.
2. **TLS Certificates**: Certificates are managed using Let's Encrypt and stored in `acme.json`.

### **Docker Compose Configuration**
```yaml
traefik:
  image: traefik:v2.9
  ports:
    - 80:80
    - 443:443
    - 8050:8080
  command:
    - "--log.level=ERROR"
    - "--api.insecure=true"
    - "--api.dashboard=true"
    - "--providers.docker=true"
    - "--providers.docker.exposedbydefault=false"
    - "--providers.docker.network=monitor"
    - "--entrypoints.web.address=:80"
    - "--entrypoints.websecure.address=:443"
    - "--certificatesresolvers.myresolver.acme.email=devops@ascension-holding.com"
    - "--certificatesresolvers.myresolver.acme.storage=acme.json"
    - "--certificatesresolvers.myresolver.acme.httpchallenge.entrypoint=web"
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock:ro
```

---

## **README.md for Loki**

### **Overview**
Loki is a horizontally scalable, highly available, multi-tenant log aggregation system inspired by Prometheus.

### **Configuration**
1. **Configuration File**: The main configuration file is located at `/opt/container/loki/loki-config.yaml`.
2. **Data Storage**: Logs are stored in `/opt/prometheus/loki-data`.

### **Usage**
- Access the Loki API at `http://localhost:3100`.

### **Docker Compose Configuration**
```yaml
loki:
  image: grafana/loki:3.2.1
  ports:
    - "3100:3100"
  volumes:
    - /opt/container/loki/loki-config.yaml:/etc/loki/loki-config.yaml
    - /opt/prometheus/loki-data:/data/loki
  command:
    - "--config.file=/etc/loki/loki-config.yaml"
```

---

## **General Notes**
1. **Networks**: All services are connected to the `monitor` network.
2. **Environment Variables**: The `.env` file contains environment-specific configurations.
3. **Scripts**:
   - `docker_compose.sh`: Script to manage Docker Compose.
   - `set-local.sh`: Script for local environment setup.

For further details, refer to the official documentation of each service.


---
# ===
---

Below is a detailed guide on how to configure the configuration files for each service in your setup. This documentation can be added to the `README.md` file for each service to help beginners understand and set up the services.

---

## **Configuration Files for Each Service**

### **1. Prometheus**
#### **Configuration File: `prometheus.yml`**
Location: `/opt/container/prometheus/prometheus.yml`

```yaml
global:
  scrape_interval: 15s # How often to scrape targets
  evaluation_interval: 15s # How often to evaluate rules

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"] # Scrape Prometheus itself

  - job_name: "cadvisor"
    static_configs:
      - targets: ["cadvisor:8080"] # Scrape cAdvisor metrics

  - job_name: "blackbox"
    metrics_path: /probe
    params:
      module: [http_2xx] # Probe HTTP endpoints
    static_configs:
      - targets:
          - http://example.com # Example target
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: blackbox_exporter:9115 # Blackbox Exporter address

rule_files:
  - "/etc/prometheus/alert.rules.yml" # Path to alert rules file
```

#### **Alert Rules File: `alert.rules.yml`**
Location: `/opt/container/prometheus/alert.rules.yml`

```yaml
groups:
  - name: example
    rules:
      - alert: HighRequestLatency
        expr: job:request_latency_seconds:mean5m{job="myjob"} > 0.5
        for: 10m
        labels:
          severity: page
        annotations:
          summary: "High request latency"
          description: "Request latency is above 0.5 seconds for the past 10 minutes."
```

---

### **2. Alertmanager**
#### **Configuration File: `alertmanager.yml`**
Location: `/opt/container/alertmanager/alertmanager.yml`

```yaml
global:
  resolve_timeout: 5m

route:
  receiver: "email-notifications"
  group_by: [alertname, job]
  routes:
    - match:
        severity: "critical"
      receiver: "email-notifications"

receivers:
  - name: "email-notifications"
    email_configs:
      - to: "devops@ascension-holding.com"
        from: "alertmanager@ascension-holding.com"
        smarthost: "smtp.example.com:587"
        auth_username: "user@example.com"
        auth_password: "password"
        require_tls: true

inhibit_rules:
  - source_match:
      severity: "critical"
    target_match:
      severity: "warning"
    equal: ["alertname", "job"]
```

---

### **3. Grafana**
#### **Data Source Configuration**
1. Log in to Grafana at `http://localhost:3000`.
2. Add Prometheus as a data source:
   - Go to **Configuration > Data Sources > Add data source**.
   - Select **Prometheus**.
   - Set the URL to `http://prometheus:9090`.
   - Save and test the connection.

#### **Dashboards**
- Import pre-built dashboards from the [Grafana Dashboard Library](https://grafana.com/grafana/dashboards/).
- Example: Use the [Node Exporter Full](https://grafana.com/grafana/dashboards/1860) dashboard for system metrics.

---

### **4. cAdvisor**
cAdvisor does not require a configuration file. It automatically collects metrics from running containers.

---

### **5. Blackbox Exporter**
#### **Configuration File: `config.yml`**
Location: `/opt/container/blackbox/config.yml`

```yaml
modules:
  http_2xx:
    prober: http
    http:
      preferred_ip_protocol: "ip4"
      valid_status_codes: [200]
      no_follow_redirects: false
  tcp_connect:
    prober: tcp
  icmp:
    prober: icmp
```

---

### **6. Traefik**
#### **Configuration File: `traefik.yml`**
Traefik is configured via Docker labels in the `docker-compose.yml` file. No additional configuration file is required.

---

### **7. Loki**
#### **Configuration File: `loki-config.yaml`**
Location: `/opt/container/loki/loki-config.yaml`

```yaml
auth_enabled: false

server:
  http_listen_port: 3100

ingester:
  lifecycler:
    address: 127.0.0.1
    ring:
      kvstore:
        store: inmemory
      replication_factor: 1
    final_sleep: 0s
  chunk_idle_period: 1h
  max_chunk_age: 1h

schema_config:
  configs:
    - from: 2020-10-24
      store: boltdb-shipper
      object_store: filesystem
      schema: v11
      index:
        prefix: index_
        period: 24h

storage_config:
  boltdb:
    directory: /data/loki/index
  filesystem:
    directory: /data/loki/chunks

limits_config:
  enforce_metric_name: false
  reject_old_samples: true
  reject_old_samples_max_age: 168h

chunk_store_config:
  max_look_back_period: 0s

table_manager:
  retention_deletes_enabled: false
  retention_period: 0s
```

---

## **README.md Template for Each Service**

Below is a template for the `README.md` file for each service. Customize it as needed.

```markdown
# [Service Name]

## **Overview**
[Brief description of the service and its purpose.]

## **Configuration**
1. **Configuration File**: [Path to the configuration file.]
2. **Key Settings**:
   - [Setting 1]: [Description]
   - [Setting 2]: [Description]
3. **Data Storage**: [Path to data storage, if applicable.]

## **Usage**
- Access the service at [URL or port].
- Example commands or API calls.

## **Docker Compose Configuration**
```yaml
[Copy the relevant Docker Compose configuration here.]
```

## **Troubleshooting**
- Common issues and solutions.
- Logs location: [Path to logs.]

## **References**
- [Official Documentation](https://example.com)
- [Useful Tutorials or Guides](https://example.com)
```

---

## **Example: Prometheus README.md**

```markdown
# Prometheus

## **Overview**
Prometheus is an open-source monitoring and alerting toolkit designed for reliability and scalability.

## **Configuration**
1. **Configuration File**: `/opt/container/prometheus/prometheus.yml`
2. **Key Settings**:
   - `scrape_interval`: How often to scrape targets.
   - `evaluation_interval`: How often to evaluate rules.
3. **Data Storage**: `/opt/container/prometheus/data`

## **Usage**
- Access the Prometheus web UI at `http://localhost:9090`.
- Reload the configuration without restarting:
  ```bash
  curl -X POST http://localhost:9090/-/reload
  ```

## **Docker Compose Configuration**
```yaml
prometheus:
  image: prom/prometheus:v2.40.2
  ports:
    - 9090:9090
  volumes:
    - /opt/container/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
    - /opt/container/prometheus/alert.rules.yml:/etc/prometheus/alert.rules.yml
    - /opt/container/prometheus/data:/prometheus
  command:
    - "--config.file=/etc/prometheus/prometheus.yml"
    - "--storage.tsdb.path=/prometheus"
    - "--storage.tsdb.retention.time=90d"
    - "--web.enable-lifecycle"
```

## **Troubleshooting**
- Check logs: `docker logs prometheus`
- Ensure the configuration file is valid.

## **References**
- [Official Documentation](https://prometheus.io/docs/)
- [Prometheus Alerting Guide](https://prometheus.io/docs/alerting/latest/overview/)
```

---

Repeat this structure for each service, customizing the details as needed. This will provide a comprehensive guide for beginners to configure and use each service.
